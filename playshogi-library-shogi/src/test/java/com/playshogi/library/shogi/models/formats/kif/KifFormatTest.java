package com.playshogi.library.shogi.models.formats.kif;

import com.playshogi.library.shogi.models.formats.sfen.SfenConverter;
import com.playshogi.library.shogi.models.formats.usf.UsfFormat;
import com.playshogi.library.shogi.models.position.ShogiPosition;
import com.playshogi.library.shogi.models.record.GameRecord;
import org.junit.Test;

import java.util.List;

import static org.junit.Assert.assertEquals;

public class KifFormatTest {

    private final String IS_SHOGI_TSUME = "# ---- 柿木将棋形式棋譜ファイル\n" +
            "# ----   generated by IS-SHOGI\n" +
            "手合割：その他　\n" +
            "上手の持駒：金四　銀　桂四　香三　歩十四　\n" +
            "  ９ ８ ７ ６ ５ ４ ３ ２ １\n" +
            "+---------------------------+\n" +
            "| ・ ・ ・ ・ ・ ・ ・ ・ 馬|一\n" +
            "| ・ ・ ・v馬 ・ ・ ・ 龍 ・|二\n" +
            "| ・ ・ ・ 銀 ・v玉 ・ ・ ・|三\n" +
            "| ・ ・ ・v歩 ・ ・v飛 ・ ・|四\n" +
            "| ・ ・ ・ ・ ・ 歩v歩 ・ ・|五\n" +
            "| ・ ・ ・ ・ ・ ・ ・ ・ ・|六\n" +
            "| ・ ・ ・ ・ ・ ・ ・ ・ ・|七\n" +
            "| ・ ・ ・ ・ ・ ・ ・ ・ ・|八\n" +
            "| ・ ・ ・ ・ ・ ・ ・ ・ ・|九\n" +
            "+---------------------------+\n" +
            "下手の持駒：なし\n" +
            "下手番\n" +
            "下手：\n" +
            "上手：\n" +
            "手数----指手---------消費時間--\n" +
            "*第２問\n" +
            "   1 ４四歩(45)   ( 0:00/00:00:00) ( 0:00/00:00:00)\n" +
            "   2 同　玉(43)   ( 0:00/00:00:00) ( 0:00/00:00:00)\n" +
            "   3 ４二龍(22)   ( 0:00/00:00:00) ( 0:00/00:00:00)\n" +
            "*正解図\n" +
            "#--separator--";

    private final String SHOGI_GUI_TSUME = "後手の持駒：角 金四 銀四 桂二 香四 歩十七 \n" +
            "  ９ ８ ７ ６ ５ ４ ３ ２ １\n" +
            "+---------------------------+\n" +
            "| ・ ・ ・ ・ ・ ・v歩 ・v玉|一\n" +
            "| ・ ・ ・ ・ ・ ・ ・ ・ ・|二\n" +
            "| ・ ・ ・ ・ ・ ・ ・v角 ・|三\n" +
            "| ・ ・ ・ ・ ・ ・ 桂 ・ ・|四\n" +
            "| ・ ・ ・ ・ ・ ・ ・ ・ ・|五\n" +
            "| ・ ・ ・ ・ ・ ・ ・ ・ ・|六\n" +
            "| ・ ・ ・ ・ ・ ・ ・ ・ ・|七\n" +
            "| ・ ・ ・ ・ ・ ・ ・ ・ ・|八\n" +
            "| ・ ・ ・ ・ ・ ・ ・ ・ ・|九\n" +
            "+---------------------------+\n" +
            "先手の持駒：飛二 桂 \n" +
            "先手：\n" +
            "後手：\n" +
            "手数----指手---------消費時間--\n" +
            "**Engines 0 YaneuraOu 2018 T.N.K. (dolphin) NNUE 4.82 64AVX2 TOURNAMENT\n" +
            "   1 １三飛打           ( 0:00/00:00:00)\n" +
            "   2 １二角打           ( 0:00/00:00:00)\n" +
            "   3 同　飛成(13)       ( 0:00/00:00:00)\n" +
            "   4 同　玉(11)        ( 0:00/00:00:00)\n" +
            "   5 １一飛打           ( 0:00/00:00:00)\n" +
            "   6 同　玉(12)        ( 0:00/00:00:00)\n" +
            "   7 ３三角打           ( 0:00/00:00:00)\n" +
            "   8 ２一玉(11)        ( 0:00/00:00:00)\n" +
            "   9 ２二桂成(34)       ( 0:00/00:00:00)\n";

    private final String KIF_81 = "#KIF version=2.0 encoding=UTF-8\n" +
            "開始日時：2020/08/10\n" +
            "場所：81Dojo\n" +
            "持ち時間：5分+10秒\n" +
            "手合割：平手\n" +
            "先手：AAA\n" +
            "後手：BBB\n" +
            "手数----指手---------消費時間--\n" +
            "1   ７六歩(77)   (0:4/0:0:4)\n" +
            "2   ３四歩(33)   (0:1/0:0:1)\n" +
            "3   ２六歩(27)   (0:1/0:0:5)\n" +
            "4   ８四歩(83)   (0:2/0:0:3)\n" +
            "5   ２五歩(26)   (0:1/0:0:6)\n" +
            "6   ８五歩(84)   (0:1/0:0:4)\n" +
            "7   ７八金(69)   (0:1/0:0:7)\n" +
            "8   ８八角成(22)   (0:2/0:0:6)\n" +
            "9   同　銀(79)   (0:1/0:0:8)\n" +
            "10   ２二銀(31)   (0:1/0:0:7)\n" +
            "11   ７七銀(88)   (0:1/0:0:9)\n" +
            "12   ３三銀(22)   (0:1/0:0:8)\n" +
            "13   ３八銀(39)   (0:1/0:0:10)\n" +
            "14   ３二金(41)   (0:1/0:0:9)\n" +
            "15   ２七銀(38)   (0:2/0:0:12)\n" +
            "16   ７二銀(71)   (0:14/0:0:23)\n" +
            "17   ２六銀(27)   (0:2/0:0:14)\n" +
            "18   １四歩(13)   (0:2/0:0:25)\n" +
            "19   １六歩(17)   (0:3/0:0:17)\n" +
            "20   ９四歩(93)   (0:19/0:0:44)\n" +
            "21   ６八玉(59)   (0:9/0:0:26)\n" +
            "22   ７四歩(73)   (0:2/0:0:46)\n" +
            "23   １五歩(16)   (0:3/0:0:29)\n" +
            "24   同　歩(14)   (0:1/0:0:47)\n" +
            "25   同　銀(26)   (0:1/0:0:30)\n" +
            "26   同　香(11)   (0:2/0:0:49)\n" +
            "27   同　香(19)   (0:1/0:0:31)\n" +
            "28   １九角打   (0:15/0:1:4)\n" +
            "29   １八飛(28)   (0:12/0:0:43)\n" +
            "30   ２七銀打   (0:2/0:1:6)\n" +
            "31   １九飛(18)   (0:24/0:1:7)\n" +
            "32   １八歩打   (0:2/0:1:8)\n" +
            "33   １二香成(15)   (0:41/0:1:48)\n" +
            "34   １九歩成(18)   (0:1/0:1:9)\n" +
            "35   ２一成香(12)   (0:2/0:1:50)\n" +
            "36   ２九と(19)   (0:4/0:1:13)\n" +
            "37   ５六香打   (0:14/0:2:4)\n" +
            "38   ４四銀(33)   (0:4/0:1:17)\n" +
            "39   ６五桂打   (0:29/0:2:33)\n" +
            "40   ４二金(32)   (0:4/0:1:21)\n" +
            "41   ３一角打   (0:14/0:2:47)\n" +
            "42   ４一桂打   (0:49/0:2:10)\n" +
            "43   ４二角成(31)   (1:28/0:4:15)\n" +
            "44   同　玉(51)   (0:3/0:2:13)\n" +
            "45   ３一角打   (0:2/0:4:17)\n" +
            "46   ５二玉(42)   (0:1/0:2:14)\n" +
            "47   ４二金打   (0:6/0:4:23)\n" +
            "48   ６二玉(52)   (0:1/0:2:15)\n" +
            "49   ４一金(42)   (0:1/0:4:24)\n" +
            "50   ２八飛打   (1:17/0:3:32)\n" +
            "51   ７九玉(68)   (0:8/0:4:32)\n" +
            "52   ７一玉(62)   (0:1/0:3:33)\n" +
            "53   ５三香成(56)   (0:34/0:5:6)\n" +
            "54   ８六歩(85)   (0:1/0:3:34)\n" +
            "55   同　銀(77)   (0:7/0:5:13)\n" +
            "56   同　飛(82)   (0:14/0:3:48)\n" +
            "57   ６二成香(53)   (0:7/0:5:20)\n" +
            "58   同　金(61)   (0:5/0:3:53)\n" +
            "59   ８六角成(31)   (0:2/0:5:22)\n" +
            "60   ８三香打   (0:3/0:3:56)\n" +
            "61   ５一飛打   (0:6/0:5:28)\n" +
            "62   ６一金(62)   (0:26/0:4:22)\n" +
            "63   同　飛成(51)   (0:8/0:5:36)\n" +
            "64   同　玉(71)   (0:11/0:4:33)\n" +
            "65   ５一金(41)   (0:8/0:5:44)\n" +
            "66   ７一玉(61)   (0:10/0:4:43)\n" +
            "67   ５二金(51)   (0:8/0:5:52)\n" +
            "68   ８六香(83)   (0:5/0:4:48)\n" +
            "69   ６二金打   (0:4/0:5:56)\n" +
            "70   ８二玉(71)   (0:3/0:4:51)\n" +
            "71   ７二金(62)   (0:5/0:6:1)\n" +
            "72   同　玉(82)   (0:1/0:4:52)\n" +
            "73   ８六歩(87)   (0:9/0:6:10)\n" +
            "74   ８七角打   (0:14/0:5:6)\n" +
            "75   ５八香打   (0:9/0:6:19)\n" +
            "76   ７六角成(87)   (0:8/0:5:14)\n" +
            "77   ７七桂(89)   (0:8/0:6:27)\n" +
            "78   ８七歩打   (0:3/0:5:17)\n" +
            "79   ８五銀打   (0:8/0:6:35)\n" +
            "80   ８八金打   (0:4/0:5:21)\n" +
            "81   ６九玉(79)   (0:10/0:6:45)\n" +
            "82   ７八金(88)   (0:1/0:5:22)\n" +
            "83   投了   (0:3/0:6:48)";

    private final String KIF_24 = "開始日時：Aug 31, 2020 6:39:53 PM\n" +
            "棋戦：Rating Game Room(short-timelimited)\n" +
            "手合割：平手\n" +
            "先手：AAA(1779)\n" +
            "後手：BBB(1795)\n" +
            "手数----指手---------消費時間--\n" +
            "1 ７六歩(77)   ( 0:02/00:00:02)\n" +
            "2 ３四歩(33)   ( 0:00/00:00:00)\n" +
            "3 ２六歩(27)   ( 0:02/00:00:04)\n" +
            "4 ５四歩(53)   ( 0:02/00:00:02)\n" +
            "5 ２五歩(26)   ( 0:03/00:00:07)\n" +
            "6 ５二飛(82)   ( 0:01/00:00:03)\n" +
            "7 ４八銀(39)   ( 0:01/00:00:08)\n" +
            "8 ６二玉(51)   ( 0:01/00:00:04)\n" +
            "9 ２二角成(88)   ( 0:07/00:00:15)\n" +
            "10 ２二銀(31)   ( 0:02/00:00:06)\n" +
            "11 ９六歩(97)   ( 0:01/00:00:16)\n" +
            "12 ９四歩(93)   ( 0:01/00:00:07)\n" +
            "13 ７八銀(79)   ( 0:01/00:00:17)\n" +
            "14 ７二玉(62)   ( 0:01/00:00:08)\n" +
            "15 ６八玉(59)   ( 0:02/00:00:19)\n" +
            "16 ８二玉(72)   ( 0:01/00:00:09)\n" +
            "17 ４六歩(47)   ( 0:01/00:00:20)\n" +
            "18 ７二銀(71)   ( 0:01/00:00:10)\n" +
            "19 ６六歩(67)   ( 0:15/00:00:35)\n" +
            "20 ６四歩(63)   ( 0:01/00:00:11)\n" +
            "21 ２四歩(25)   ( 0:06/00:00:41)\n" +
            "22 ２四歩(23)   ( 0:01/00:00:12)\n" +
            "23 ２四飛(28)   ( 0:01/00:00:42)\n" +
            "24 ２三歩打     ( 0:01/00:00:13)\n" +
            "25 ２八飛(24)   ( 0:07/00:00:49)\n" +
            "26 ５五歩(54)   ( 0:01/00:00:14)\n" +
            "27 ４七銀(48)   ( 0:02/00:00:51)\n" +
            "28 ５一飛(52)   ( 0:02/00:00:16)\n" +
            "29 １六角打     ( 0:15/00:01:06)\n" +
            "30 ３二金(41)   ( 0:06/00:00:22)\n" +
            "31 ３四角(16)   ( 0:02/00:01:08)\n" +
            "32 ５四飛(51)   ( 0:16/00:00:38)\n" +
            "33 ４五角(34)   ( 0:02/00:01:10)\n" +
            "34 ２四飛(54)   ( 0:16/00:00:54)\n" +
            "35 ２五歩打     ( 0:18/00:01:28)\n" +
            "36 ４四飛(24)   ( 0:03/00:00:57)\n" +
            "37 ７九玉(68)   ( 0:05/00:01:33)\n" +
            "38 ３三銀(22)   ( 0:04/00:01:01)\n" +
            "39 ８八玉(79)   ( 0:06/00:01:39)\n" +
            "40 ３四銀(33)   ( 0:02/00:01:03)\n" +
            "41 ６七角(45)   ( 0:10/00:01:49)\n" +
            "42 ６五歩(64)   ( 0:01/00:01:04)\n" +
            "43 ７七銀(78)   ( 0:25/00:02:14)\n" +
            "44 ３三桂(21)   ( 0:09/00:01:13)\n" +
            "45 ２四歩(25)   ( 0:05/00:02:19)\n" +
            "46 ２四歩(23)   ( 0:02/00:01:15)\n" +
            "47 ２四飛(28)   ( 0:02/00:02:21)\n" +
            "48 ２三金(32)   ( 0:01/00:01:16)\n" +
            "49 ２八飛(24)   ( 0:10/00:02:31)\n" +
            "50 ２四歩打     ( 0:22/00:01:38)\n" +
            "51 ６五歩(66)   ( 0:09/00:02:40)\n" +
            "52 ２二金(23)   ( 0:15/00:01:53)\n" +
            "53 反則勝ち";

    private final String KIF_PYO = "# ---- ぴよ将棋w 棋譜ファイル ----\n" +
            "棋戦：ぴよ将棋w ハ枚落ち（トンボ）\n" +
            "開始日時：2020/09/27 18:07:32\n" +
            "終了日時：2020/09/27 18:09:25\n" +
            "下手：プレイヤー\n" +
            "上手：Lv16 ピヨ郎(R810)\n" +
            "手合割：その他\n" +
            "上手の持駒：\n" +
            "  ９ ８ ７ ６ ５ ４ ３ ２ １\n" +
            "+---------------------------+\n" +
            "| ・ ・ ・ ・v玉 ・ ・ ・ ・|一\n" +
            "| ・v飛 ・ ・ ・ ・ ・v角 ・|二\n" +
            "|v歩v歩v歩v歩v歩v歩v歩v歩v歩|三\n" +
            "| ・ ・ ・ ・ ・ ・ ・ ・ ・|四\n" +
            "| ・ ・ ・ ・ ・ ・ ・ ・ ・|五\n" +
            "| ・ ・ ・ ・ ・ ・ ・ ・ ・|六\n" +
            "| 歩 歩 歩 歩 歩 歩 歩 歩 歩|七\n" +
            "| ・ 角 ・ ・ ・ ・ ・ 飛 ・|八\n" +
            "| 香 桂 銀 金 玉 金 銀 桂 香|九\n" +
            "+---------------------------+\n" +
            "下手の持駒：\n" +
            "上手番\n" +
            "手数----指手---------消費時間--\n" +
            "   1 ８四歩(83)   ( 0:01/00:00:01)\n" +
            "   2 ２六歩(27)   ( 0:01/00:00:01)\n" +
            "   3 ８五歩(84)   ( 0:01/00:00:02)\n" +
            "   4 ２五歩(26)   ( 0:01/00:00:02)\n" +
            "   5 ８六歩(85)   ( 0:01/00:00:03)\n" +
            "   6 ８六歩(87)   ( 0:01/00:00:03)\n" +
            "   7 ８六飛(82)   ( 0:01/00:00:04)\n" +
            "   8 ７六歩(77)   ( 0:01/00:00:04)\n" +
            "   9 ８四飛(86)   ( 0:01/00:00:05)\n" +
            "  10 ７八金(69)   ( 0:02/00:00:06)\n" +
            "  11 ６一玉(51)   ( 0:01/00:00:06)\n" +
            "  12 ８七歩打     ( 0:04/00:00:10)\n" +
            "  13 ５二玉(61)   ( 0:01/00:00:07)\n" +
            "  14 ３八銀(39)   ( 0:01/00:00:11)\n" +
            "  15 ８一飛(84)   ( 0:01/00:00:08)\n" +
            "  16 ２七銀(38)   ( 0:01/00:00:12)\n" +
            "  17 ８五歩打     ( 0:01/00:00:09)\n" +
            "  18 ３六銀(27)   ( 0:02/00:00:14)\n" +
            "  19 ８四飛(81)   ( 0:01/00:00:10)\n" +
            "  20 ３五銀(36)   ( 0:01/00:00:15)\n" +
            "  21 ６四飛(84)   ( 0:01/00:00:11)\n" +
            "  22 ２四歩(25)   ( 0:01/00:00:16)\n" +
            "  23 ２四歩(23)   ( 0:01/00:00:12)\n" +
            "  24 ２四銀(35)   ( 0:01/00:00:17)\n" +
            "  25 ２六歩打     ( 0:01/00:00:13)\n" +
            "  26 ２六飛(28)   ( 0:01/00:00:18)\n" +
            "  27 ３一角(22)   ( 0:01/00:00:14)\n" +
            "  28 ３三銀成(24) ( 0:02/00:00:20)\n" +
            "  29 ８六歩(85)   ( 0:01/00:00:15)\n" +
            "  30 ２一飛成(26) ( 0:01/00:00:21)\n" +
            "  31 ８七歩成(86) ( 0:01/00:00:16)\n" +
            "  32 ８七金(78)   ( 0:01/00:00:22)\n" +
            "  33 ６七飛成(64) ( 0:01/00:00:17)\n" +
            "  34 ３一龍(21)   ( 0:05/00:00:27)\n" +
            "  35 ８七龍(67)   ( 0:01/00:00:18)\n" +
            "  36 ４二龍(31)   ( 0:01/00:00:28)\n" +
            "  37 ６一玉(52)   ( 0:01/00:00:19)\n" +
            "  38 ５八金(49)   ( 0:06/00:00:34)\n" +
            "  39 ２八歩打     ( 0:01/00:00:20)\n" +
            "  40 ８二歩打     ( 0:05/00:00:39)\n" +
            "  41 ５二金打     ( 0:01/00:00:21)\n" +
            "  42 ４一龍(42)   ( 0:03/00:00:42)\n" +
            "  43 ５一金(52)   ( 0:01/00:00:22)\n" +
            "  44 ３二龍(41)   ( 0:04/00:00:46)\n" +
            "  45 ７一玉(61)   ( 0:01/00:00:23)\n" +
            "  46 ４三成銀(33) ( 0:06/00:00:52)\n" +
            "  47 ２九歩成(28) ( 0:01/00:00:24)\n" +
            "  48 ３三角成(88) ( 0:02/00:00:54)\n" +
            "  49 ４二金(51)   ( 0:01/00:00:25)\n" +
            "  50 ４二龍(32)   ( 0:01/00:00:55)\n" +
            "  51 ２八と(29)   ( 0:01/00:00:26)\n" +
            "  52 ７二金打     ( 0:01/00:00:56)\n" +
            "  53 投了         ( 0:00/00:00:26)\n" +
            "まで52手で下手の勝ち";

    private final String KIF_GOTE_POSITION = "#KIF version=2.0 encoding=UTF-8\n" +
            "後手の持駒：角　歩\n" +
            "  ９ ８ ７ ６ ５ ４ ３ ２ １\n" +
            "+---------------------------+\n" +
            "|v香v桂 ・v金 ・ ・ ・v桂v香|一\n" +
            "| ・v玉v銀 ・v金 ・ ・v飛 ・|二\n" +
            "| ・v歩v歩v歩v歩 ・ ・v歩v歩|三\n" +
            "|v歩 ・ ・ ・ ・v銀v歩 ・ ・|四\n" +
            "| ・ ・ ・ ・ ・ ・ ・ 歩 ・|五\n" +
            "| 歩 ・ 歩 歩 ・ 銀 歩 ・ 歩|六\n" +
            "| ・ 歩 銀 ・ 歩 ・ ・ ・ ・|七\n" +
            "| ・ 玉 金 ・ ・ ・ ・ 飛 ・|八\n" +
            "| 香 桂 ・ ・ ・ 金 ・ 桂 香|九\n" +
            "+---------------------------+\n" +
            "先手の持駒：角　歩\n" +
            "後手番\n" +
            "先手：AAA\n" +
            "後手：BBB\n" +
            "手数＝33  ▲４六同銀  まで";

    private final String KIF_ONLY_POSITION = "後手の持駒：角　歩\n" +
            "  ９ ８ ７ ６ ５ ４ ３ ２ １\n" +
            "+---------------------------+\n" +
            "|v香v桂 ・v金 ・ ・ ・v桂v香|一\n" +
            "| ・v玉v銀 ・v金 ・ ・v飛 ・|二\n" +
            "| ・v歩v歩v歩v歩 ・ ・v歩v歩|三\n" +
            "|v歩 ・ ・ ・ ・v銀v歩 ・ ・|四\n" +
            "| ・ ・ ・ ・ ・ ・ ・ 歩 ・|五\n" +
            "| 歩 ・ 歩 歩 ・ 銀 歩 ・ 歩|六\n" +
            "| ・ 歩 銀 ・ 歩 ・ ・ ・ ・|七\n" +
            "| ・ 玉 金 ・ ・ ・ ・ 飛 ・|八\n" +
            "| 香 桂 ・ ・ ・ 金 ・ 桂 香|九\n" +
            "+---------------------------+\n" +
            "先手の持駒：角　歩\n" +
            "後手番\n";

    private final String KIF_ONLY_POSITION_DOKORO = "#KIF version=2.0 encoding=UTF-8\n" +
            "後手の持駒：なし\n" +
            "  ９ ８ ７ ６ ５ ４ ３ ２ １\n" +
            "+---------------------------+\n" +
            "|v香v桂v銀v金v玉v金v銀v桂v香|一\n" +
            "| ・v飛 ・ ・ ・ ・ ・ 馬 ・|二\n" +
            "|v歩v歩v歩v歩v歩v歩 ・v歩v歩|三\n" +
            "| ・ ・ ・ ・ ・ ・v歩 ・ ・|四\n" +
            "| ・ ・ ・ ・ ・ ・ ・ ・ ・|五\n" +
            "| ・ ・ 歩 ・ ・ ・ ・ ・ ・|六\n" +
            "| 歩 歩 ・ 歩 歩 歩 歩 歩 歩|七\n" +
            "| ・ ・ ・ ・ ・ ・ ・ 飛 ・|八\n" +
            "| 香 桂 銀 金 玉 金 銀 桂 香|九\n" +
            "+---------------------------+\n" +
            "先手の持駒：角\n" +
            "後手番\n" +
            "先手：\n" +
            "後手：\n";

    private final String ANOTHER_KIF = "先手：AAA 初段\n" +
            "後手：BBB 初段\n" +
            "開始日時：2020/09/28 22:00:12\n" +
            "棋戦：将棋ウォーズ(10分切れ負け)\n" +
            "持ち時間：10分\n" +
            "先手の囲い：elmo囲い, 左山囲い\n" +
            "後手の囲い：美濃囲い\n" +
            "先手の備考：居飛車, 対振り, 対抗型\n" +
            "後手の備考：振り飛車, 対抗型\n" +
            "手合割：平手\n" +
            "手数----指手---------消費時間--\n" +
            "   1 ２六歩(27)   (00:01/00:00:01)\n" +
            "*▲備考：居飛車\n" +
            "   2 ３四歩(33)   (00:00/00:00:00)\n" +
            "   3 ２五歩(26)   (00:00/00:00:01)\n" +
            "   4 ３三角(22)   (00:01/00:00:01)\n" +
            "   5 ４八銀(39)   (00:01/00:00:02)\n" +
            "   6 ３二銀(31)   (00:01/00:00:02)\n" +
            "   7 １六歩(17)   (00:00/00:00:02)\n" +
            "   8 ４四歩(43)   (00:02/00:00:04)\n" +
            "   9 ３六歩(37)   (00:01/00:00:03)\n" +
            "  10 ４三銀(32)   (00:01/00:00:05)\n" +
            "  11 ３七銀(48)   (00:00/00:00:03)\n" +
            "  12 ３二飛(82)   (00:01/00:00:06)\n" +
            "*△備考：振り飛車\n" +
            "  13 ６八玉(59)   (00:01/00:00:04)\n" +
            "  14 ６二玉(51)   (00:01/00:00:07)\n" +
            "  15 ７八玉(68)   (00:01/00:00:05)\n" +
            "  16 ７二玉(62)   (00:01/00:00:08)\n" +
            "  17 ６八銀(79)   (00:01/00:00:06)\n" +
            "  18 ８二玉(72)   (00:01/00:00:09)\n" +
            "  19 ７九金(69)   (00:00/00:00:06)\n" +
            "*▲囲い：elmo囲い\n" +
            "  20 ７二銀(71)   (00:01/00:00:10)\n" +
            "*△囲い：片美濃囲い\n" +
            "  21 ９六歩(97)   (00:01/00:00:07)\n" +
            "  22 ９四歩(93)   (00:01/00:00:11)\n" +
            "  23 ４六銀(37)   (00:00/00:00:07)\n" +
            "  24 ５四歩(53)   (00:15/00:00:26)\n" +
            "  25 ５六歩(57)   (00:02/00:00:09)\n" +
            "  26 ５二金(41)   (00:03/00:00:29)\n" +
            "*△囲い：美濃囲い\n" +
            "  27 ５九金(49)   (00:01/00:00:10)\n" +
            "*▲囲い：左山囲い\n" +
            "  28 ４二角(33)   (00:05/00:00:34)\n" +
            "  29 ７六歩(77)   (00:06/00:00:16)\n" +
            "  30 １二香(11)   (00:15/00:00:49)\n" +
            "  31 １五歩(16)   (00:03/00:00:19)\n" +
            "  32 ６四角(42)   (00:12/00:01:01)\n" +
            "  33 ５五歩(56)   (00:03/00:00:22)\n" +
            "  34 ４五歩(44)   (00:29/00:01:30)\n" +
            "  35 ４五銀(46)   (00:03/00:00:25)\n" +
            "  36 ５五角(64)   (00:02/00:01:32)\n" +
            "  37 ５五角(88)   (00:10/00:00:35)\n" +
            "  38 ５五歩(54)   (00:01/00:01:33)\n" +
            "  39 ２四歩(25)   (00:08/00:00:43)\n" +
            "  40 ２四歩(23)   (00:02/00:01:35)\n" +
            "  41 ２三角打     (00:29/00:01:12)\n" +
            "  42 ２二飛(32)   (00:02/00:01:37)\n" +
            "  43 ３四銀(45)   (00:02/00:01:14)\n" +
            "  44 ３二銀(43)   (01:39/00:03:16)\n" +
            "  45 ３二角成(23) (00:09/00:01:23)\n" +
            "  46 ３二飛(22)   (00:01/00:03:17)\n" +
            "  47 ４三銀打     (00:02/00:01:25)\n" +
            "  48 ３一飛(32)   (00:18/00:03:35)\n" +
            "  49 ２四飛(28)   (00:16/00:01:41)\n" +
            "  50 ５六歩(55)   (00:12/00:03:47)\n" +
            "  51 ７七桂(89)   (00:34/00:02:15)\n" +
            "  52 ４三金(52)   (00:35/00:04:22)\n" +
            "  53 ４三銀成(34) (00:03/00:02:18)\n" +
            "  54 ３六飛(31)   (00:02/00:04:24)\n" +
            "  55 ２一飛成(24) (00:09/00:02:27)\n" +
            "  56 ３九飛成(36) (00:25/00:04:49)\n" +
            "  57 ５八歩打     (00:05/00:02:32)\n" +
            "  58 ５七歩成(56) (00:04/00:04:53)\n" +
            "  59 ５七銀(68)   (00:07/00:02:39)\n" +
            "  60 ５九龍(39)   (00:10/00:05:03)\n" +
            "  61 ５三桂打     (00:21/00:03:00)\n" +
            "  62 ７一金(61)   (00:33/00:05:36)\n" +
            "  63 ５二成銀(43) (00:03/00:03:03)\n" +
            "  64 ３五角打     (00:10/00:05:46)\n" +
            "  65 １二龍(21)   (00:25/00:03:28)\n" +
            "  66 ３四角打     (00:36/00:06:22)\n" +
            "  67 ３二龍(12)   (00:07/00:03:35)\n" +
            "  68 ７九龍(59)   (00:27/00:06:49)\n" +
            "  69 ７九玉(78)   (00:02/00:03:37)\n" +
            "  70 ６七角成(34) (00:01/00:06:50)\n" +
            "  71 ６八金打     (00:09/00:03:46)\n" +
            "  72 ８九金打     (00:11/00:07:01)\n" +
            "  73 ６九玉(79)   (00:01/00:03:47)\n" +
            "  74 ５七角成(35) (00:02/00:07:03)\n" +
            "  75 ５七歩(58)   (00:02/00:03:49)\n" +
            "  76 ７八銀打     (00:07/00:07:10)\n" +
            "  77 ５九玉(69)   (00:02/00:03:51)\n" +
            "  78 ４九金打     (00:02/00:07:12)\n" +
            "  79 詰み\n" +
            "まで78手で後手の勝ち";

    public final String HANDICAP_1 = "#KIF version=2.0 encoding=UTF-8\n" +
            "開始日時：2021/06/26\n" +
            "場所：81Dojo\n" +
            "持ち時間：0分+60秒\n" +
            "手合割：その他\n" +
            "上手の持駒：\n" +
            "  ９ ８ ７ ６ ５ ４ ３ ２ １\n" +
            "+---------------------------+\n" +
            "| v香 v桂 v銀 v金 v玉 v金 v銀 v桂 v香|一\n" +
            "| ・ ・ ・ ・ ・ ・ ・ ・ ・|二\n" +
            "|v歩v歩v歩v歩v歩v歩v歩v歩v歩|三\n" +
            "| ・ ・ ・ ・ ・ ・ ・ ・ ・|四\n" +
            "| ・ ・ ・ ・ ・ ・ ・ ・ ・|五\n" +
            "| ・ ・ ・ ・ ・ ・ ・ ・ ・|六\n" +
            "| 歩 歩 歩 歩 歩 歩 歩 歩 歩|七\n" +
            "| ・ 角 ・ ・ ・ ・ ・ 飛 ・|八\n" +
            "| 香 桂 銀 金 玉 金 銀 桂 香|九\n" +
            "+---------------------------+\n" +
            "下手の持駒\n" +
            "後手番\n" +
            "先手：aaa\n" +
            "後手：bbb\n" +
            "手数----指手---------消費時間--\n" +
            "1   ６二銀(71)   (0:6/0:0:6)\n" +
            "2   ７六歩(77)   (0:1/0:0:1)\n" +
            "3   ５四歩(53)   (0:1/0:0:7)\n" +
            "4   ４六歩(47)   (0:1/0:0:2)\n" +
            "5   ５三銀(62)   (0:1/0:0:8)\n" +
            "6   ４五歩(46)   (0:1/0:0:3)\n" +
            "7   ３二金(41)   (0:3/0:0:11)\n" +
            "8   ５六歩(57)   (0:1/0:0:4)\n" +
            "9   ５二玉(51)   (0:3/0:0:14)\n" +
            "10   ３六歩(37)   (0:4/0:0:8)\n" +
            "11   ６四歩(63)   (0:1/0:0:15)\n" +
            "12   ３五歩(36)   (0:4/0:0:12)\n" +
            "13   ２二銀(31)   (0:1/0:0:16)\n" +
            "14   ４八銀(39)   (0:2/0:0:14)\n" +
            "15   ６二金(61)   (0:1/0:0:17)\n" +
            "16   ４七銀(48)   (0:1/0:0:15)\n" +
            "17   ６三金(62)   (0:3/0:0:20)\n" +
            "18   ６八銀(79)   (0:1/0:0:16)\n" +
            "19   ７四金(63)   (0:1/0:0:21)\n" +
            "20   ７八金(69)   (0:3/0:0:19)\n" +
            "21   ６五歩(64)   (0:4/0:0:25)\n" +
            "22   ５七銀(68)   (0:1/0:0:20)\n" +
            "23   ８五金(74)   (0:8/0:0:33)\n" +
            "24   ６八飛(28)   (0:11/0:0:31)\n" +
            "25   ７六金(85)   (0:1/0:0:34)\n" +
            "26   ４八玉(59)   (0:8/0:0:39)\n" +
            "27   ８四歩(83)   (0:8/0:0:42)\n" +
            "28   ６六歩(67)   (0:2/0:0:41)\n" +
            "29   同　歩(65)   (0:6/0:0:48)\n" +
            "30   同　銀(57)   (0:2/0:0:43)\n" +
            "31   ８五歩(84)   (0:30/0:1:18)\n" +
            "32   ６五銀(66)   (0:4/0:0:47)\n" +
            "33   ６七歩打   (0:11/0:1:29)\n" +
            "34   ６九飛(68)   (0:27/0:1:14)\n" +
            "35   ７五金(76)   (0:2/0:1:31)\n" +
            "36   ６六歩打   (0:34/0:1:48)\n" +
            "37   ３一銀(22)   (0:13/0:1:44)\n" +
            "38   ６七飛(69)   (0:7/0:1:55)\n" +
            "39   ６四歩打   (0:9/0:1:53)\n" +
            "40   ７六歩打   (0:7/0:2:2)\n" +
            "41   ７四金(75)   (0:15/0:2:8)\n" +
            "42   同　銀(65)   (0:6/0:2:8)\n" +
            "43   同　歩(73)   (0:1/0:2:9)\n" +
            "44   ６五歩(66)   (0:10/0:2:18)\n" +
            "45   ６三銀打   (0:21/0:2:30)\n" +
            "46   ４六銀(47)   (0:35/0:2:53)\n" +
            "47   ７三桂(81)   (0:2/0:2:32)\n" +
            "48   ６四歩(65)   (0:13/0:3:6)\n" +
            "49   同　銀(53)   (0:2/0:2:34)\n" +
            "50   ８三金打   (0:18/0:3:24)\n" +
            "51   ４二銀(31)   (0:45/0:3:19)\n" +
            "52   ５五歩(56)   (0:15/0:3:39)\n" +
            "53   ６六歩打   (0:5/0:3:24)\n" +
            "54   同　角(88)   (0:26/0:4:5)\n" +
            "55   ５三銀(42)   (0:7/0:3:31)\n" +
            "56   ８四角(66)   (0:34/0:4:39)\n" +
            "57   ６五桂(73)   (0:32/0:4:3)\n" +
            "58   ６六歩打   (0:13/0:4:52)\n" +
            "59   ５五銀(64)   (0:2/0:4:5)\n" +
            "60   同　銀(46)   (0:7/0:4:59)\n" +
            "61   同　歩(54)   (0:1/0:4:6)\n" +
            "62   ６五歩(66)   (0:10/0:5:9)\n" +
            "63   ５六銀打   (0:2/0:4:8)\n" +
            "64   ６九飛(67)   (0:27/0:5:36)\n" +
            "65   ４四歩(43)   (0:11/0:4:19)\n" +
            "66   ５七歩打   (0:2/0:5:38)\n" +
            "67   ４五銀(56)   (0:3/0:4:22)\n" +
            "68   ７三角成(84)   (0:26/0:6:4)\n" +
            "69   ５四銀(63)   (0:6/0:4:28)\n" +
            "70   ６四歩(65)   (0:20/0:6:24)\n" +
            "71   ６五歩打   (0:6/0:4:34)\n" +
            "72   ６三銀打   (0:34/0:6:58)\n" +
            "73   ４三玉(52)   (0:1/0:4:35)\n" +
            "74   ５四銀成(63)   (0:2/0:7:0)\n" +
            "75   同　銀(53)   (0:8/0:4:43)\n" +
            "76   ６三歩成(64)   (0:3/0:7:3)\n" +
            "77   ５六歩(55)   (0:8/0:4:51)\n" +
            "78   ５二銀打   (0:33/0:7:36)\n" +
            "79   ４二玉(43)   (0:5/0:4:56)\n" +
            "80   ５一馬(73)   (0:3/0:7:39)\n" +
            "81   ３一玉(42)   (0:2/0:4:58)\n" +
            "82   ５三と(63)   (0:10/0:7:49)\n" +
            "83   ５七歩成(56)   (0:8/0:5:6)\n" +
            "84   同　玉(48)   (0:7/0:7:56)\n" +
            "85   ５五銀(54)   (0:1/0:5:7)\n" +
            "86   ６五飛(69)   (0:45/0:8:41)\n" +
            "87   ５六銀(55)   (0:48/0:5:55)\n" +
            "88   ６六玉(57)   (0:4/0:8:45)\n" +
            "89   ６五銀(56)   (0:1/0:5:56)\n" +
            "90   同　玉(66)   (0:1/0:8:46)\n" +
            "91   ６九飛打   (0:1/0:5:57)\n" +
            "92   ６六歩打   (0:10/0:8:56)\n" +
            "93   ４九飛成(69)   (0:1/0:5:58)\n" +
            "94   ６四玉(65)   (0:4/0:9:0)\n" +
            "95   ５八龍(49)   (0:1/0:5:59)\n" +
            "96   ５四歩打   (0:9/0:9:9)\n" +
            "97   ５六龍(58)   (0:33/0:6:32)\n" +
            "98   ７三玉(64)   (0:17/0:9:26)\n" +
            "99   ６六龍(56)   (0:1/0:6:33)\n" +
            "100   ７二玉(73)   (0:9/0:9:35)\n" +
            "101   ２二玉(31)   (0:7/0:6:40)\n" +
            "102   ４二と(53)   (0:25/0:10:0)\n" +
            "103   同　金(32)   (0:55/0:7:35)\n" +
            "104   同　馬(51)   (0:13/0:10:13)\n" +
            "105   ３一銀打   (0:13/0:7:48)\n" +
            "106   ４一馬(42)   (0:55/0:11:8)\n" +
            "107   ５四銀(45)   (0:4/0:7:52)\n" +
            "108   ３二金打   (0:26/0:11:34)\n" +
            "109   同　銀(31)   (0:3/0:7:55)\n" +
            "110   ３一銀打   (0:2/0:11:36)\n" +
            "111   １二玉(22)   (0:4/0:7:59)\n" +
            "112   ３二馬(41)   (0:2/0:11:38)\n" +
            "113   ６一金打   (0:37/0:8:36)\n" +
            "114   同　銀成(52)   (0:19/0:11:57)\n" +
            "115   ６三龍(66)   (0:1/0:8:37)\n" +
            "116   ８一玉(72)   (0:27/0:12:24)\n" +
            "117   ８三龍(63)   (0:54/0:9:31)\n" +
            "118   ８二銀打   (0:19/0:12:43)\n" +
            "119   ９二龍(83)   (0:14/0:9:45)\n" +
            "120   ７二玉(81)   (0:52/0:13:35)\n" +
            "121   ８一金打   (0:2/0:9:47)\n" +
            "122   ６二玉(72)   (0:20/0:13:55)\n" +
            "123   ８二龍(92)   (0:7/0:9:54)\n" +
            "124   ５三玉(62)   (0:8/0:14:3)\n" +
            "125   ６三金打   (0:1/0:9:55)\n" +
            "126   ４四玉(53)   (0:9/0:14:12)\n" +
            "127   ５三銀打   (0:9/0:10:4)\n" +
            "128   投了   (0:1/0:14:13)";

    public final String HANDICAP_81 = "#KIF version=2.0 encoding=UTF-8\n" +
            "開始日時：2021/06/26\n" +
            "場所：81Dojo\n" +
            "持ち時間：0分+60秒\n" +
            "手合割：二枚落ち\n" +
            "先手：aaa\n" +
            "後手：bbb\n" +
            "手数----指手---------消費時間--\n" +
            "1   ６二銀(71)   (0:6/0:0:6)\n" +
            "2   ７六歩(77)   (0:1/0:0:1)\n" +
            "3   ５四歩(53)   (0:1/0:0:7)\n" +
            "4   ４六歩(47)   (0:1/0:0:2)\n" +
            "5   ５三銀(62)   (0:1/0:0:8)\n" +
            "6   ４五歩(46)   (0:1/0:0:3)\n" +
            "7   ３二金(41)   (0:3/0:0:11)\n" +
            "8   ５六歩(57)   (0:1/0:0:4)\n" +
            "9   ５二玉(51)   (0:3/0:0:14)\n" +
            "10   ３六歩(37)   (0:4/0:0:8)\n" +
            "11   ６四歩(63)   (0:1/0:0:15)\n" +
            "12   ３五歩(36)   (0:4/0:0:12)\n" +
            "13   ２二銀(31)   (0:1/0:0:16)\n" +
            "14   ４八銀(39)   (0:2/0:0:14)\n" +
            "15   ６二金(61)   (0:1/0:0:17)\n" +
            "16   ４七銀(48)   (0:1/0:0:15)\n" +
            "17   ６三金(62)   (0:3/0:0:20)\n" +
            "18   ６八銀(79)   (0:1/0:0:16)\n" +
            "19   ７四金(63)   (0:1/0:0:21)\n" +
            "20   ７八金(69)   (0:3/0:0:19)\n" +
            "21   ６五歩(64)   (0:4/0:0:25)\n" +
            "22   ５七銀(68)   (0:1/0:0:20)\n" +
            "23   ８五金(74)   (0:8/0:0:33)\n" +
            "24   ６八飛(28)   (0:11/0:0:31)\n" +
            "25   ７六金(85)   (0:1/0:0:34)\n" +
            "26   ４八玉(59)   (0:8/0:0:39)\n" +
            "27   ８四歩(83)   (0:8/0:0:42)\n" +
            "28   ６六歩(67)   (0:2/0:0:41)\n" +
            "29   同　歩(65)   (0:6/0:0:48)\n" +
            "30   同　銀(57)   (0:2/0:0:43)\n" +
            "31   ８五歩(84)   (0:30/0:1:18)\n" +
            "32   ６五銀(66)   (0:4/0:0:47)\n" +
            "33   ６七歩打   (0:11/0:1:29)\n" +
            "34   ６九飛(68)   (0:27/0:1:14)\n" +
            "35   ７五金(76)   (0:2/0:1:31)\n" +
            "36   ６六歩打   (0:34/0:1:48)\n" +
            "37   ３一銀(22)   (0:13/0:1:44)\n" +
            "38   ６七飛(69)   (0:7/0:1:55)\n" +
            "39   ６四歩打   (0:9/0:1:53)\n" +
            "40   ７六歩打   (0:7/0:2:2)\n" +
            "41   ７四金(75)   (0:15/0:2:8)\n" +
            "42   同　銀(65)   (0:6/0:2:8)\n" +
            "43   同　歩(73)   (0:1/0:2:9)\n" +
            "44   ６五歩(66)   (0:10/0:2:18)\n" +
            "45   ６三銀打   (0:21/0:2:30)\n" +
            "46   ４六銀(47)   (0:35/0:2:53)\n" +
            "47   ７三桂(81)   (0:2/0:2:32)\n" +
            "48   ６四歩(65)   (0:13/0:3:6)\n" +
            "49   同　銀(53)   (0:2/0:2:34)\n" +
            "50   ８三金打   (0:18/0:3:24)\n" +
            "51   ４二銀(31)   (0:45/0:3:19)\n" +
            "52   ５五歩(56)   (0:15/0:3:39)\n" +
            "53   ６六歩打   (0:5/0:3:24)\n" +
            "54   同　角(88)   (0:26/0:4:5)\n" +
            "55   ５三銀(42)   (0:7/0:3:31)\n" +
            "56   ８四角(66)   (0:34/0:4:39)\n" +
            "57   ６五桂(73)   (0:32/0:4:3)\n" +
            "58   ６六歩打   (0:13/0:4:52)\n" +
            "59   ５五銀(64)   (0:2/0:4:5)\n" +
            "60   同　銀(46)   (0:7/0:4:59)\n" +
            "61   同　歩(54)   (0:1/0:4:6)\n" +
            "62   ６五歩(66)   (0:10/0:5:9)\n" +
            "63   ５六銀打   (0:2/0:4:8)\n" +
            "64   ６九飛(67)   (0:27/0:5:36)\n" +
            "65   ４四歩(43)   (0:11/0:4:19)\n" +
            "66   ５七歩打   (0:2/0:5:38)\n" +
            "67   ４五銀(56)   (0:3/0:4:22)\n" +
            "68   ７三角成(84)   (0:26/0:6:4)\n" +
            "69   ５四銀(63)   (0:6/0:4:28)\n" +
            "70   ６四歩(65)   (0:20/0:6:24)\n" +
            "71   ６五歩打   (0:6/0:4:34)\n" +
            "72   ６三銀打   (0:34/0:6:58)\n" +
            "73   ４三玉(52)   (0:1/0:4:35)\n" +
            "74   ５四銀成(63)   (0:2/0:7:0)\n" +
            "75   同　銀(53)   (0:8/0:4:43)\n" +
            "76   ６三歩成(64)   (0:3/0:7:3)\n" +
            "77   ５六歩(55)   (0:8/0:4:51)\n" +
            "78   ５二銀打   (0:33/0:7:36)\n" +
            "79   ４二玉(43)   (0:5/0:4:56)\n" +
            "80   ５一馬(73)   (0:3/0:7:39)\n" +
            "81   ３一玉(42)   (0:2/0:4:58)\n" +
            "82   ５三と(63)   (0:10/0:7:49)\n" +
            "83   ５七歩成(56)   (0:8/0:5:6)\n" +
            "84   同　玉(48)   (0:7/0:7:56)\n" +
            "85   ５五銀(54)   (0:1/0:5:7)\n" +
            "86   ６五飛(69)   (0:45/0:8:41)\n" +
            "87   ５六銀(55)   (0:48/0:5:55)\n" +
            "88   ６六玉(57)   (0:4/0:8:45)\n" +
            "89   ６五銀(56)   (0:1/0:5:56)\n" +
            "90   同　玉(66)   (0:1/0:8:46)\n" +
            "91   ６九飛打   (0:1/0:5:57)\n" +
            "92   ６六歩打   (0:10/0:8:56)\n" +
            "93   ４九飛成(69)   (0:1/0:5:58)\n" +
            "94   ６四玉(65)   (0:4/0:9:0)\n" +
            "95   ５八龍(49)   (0:1/0:5:59)\n" +
            "96   ５四歩打   (0:9/0:9:9)\n" +
            "97   ５六龍(58)   (0:33/0:6:32)\n" +
            "98   ７三玉(64)   (0:17/0:9:26)\n" +
            "99   ６六龍(56)   (0:1/0:6:33)\n" +
            "100   ７二玉(73)   (0:9/0:9:35)\n" +
            "101   ２二玉(31)   (0:7/0:6:40)\n" +
            "102   ４二と(53)   (0:25/0:10:0)\n" +
            "103   同　金(32)   (0:55/0:7:35)\n" +
            "104   同　馬(51)   (0:13/0:10:13)\n" +
            "105   ３一銀打   (0:13/0:7:48)\n" +
            "106   ４一馬(42)   (0:55/0:11:8)\n" +
            "107   ５四銀(45)   (0:4/0:7:52)\n" +
            "108   ３二金打   (0:26/0:11:34)\n" +
            "109   同　銀(31)   (0:3/0:7:55)\n" +
            "110   ３一銀打   (0:2/0:11:36)\n" +
            "111   １二玉(22)   (0:4/0:7:59)\n" +
            "112   ３二馬(41)   (0:2/0:11:38)\n" +
            "113   ６一金打   (0:37/0:8:36)\n" +
            "114   同　銀成(52)   (0:19/0:11:57)\n" +
            "115   ６三龍(66)   (0:1/0:8:37)\n" +
            "116   ８一玉(72)   (0:27/0:12:24)\n" +
            "117   ８三龍(63)   (0:54/0:9:31)\n" +
            "118   ８二銀打   (0:19/0:12:43)\n" +
            "119   ９二龍(83)   (0:14/0:9:45)\n" +
            "120   ７二玉(81)   (0:52/0:13:35)\n" +
            "121   ８一金打   (0:2/0:9:47)\n" +
            "122   ６二玉(72)   (0:20/0:13:55)\n" +
            "123   ８二龍(92)   (0:7/0:9:54)\n" +
            "124   ５三玉(62)   (0:8/0:14:3)\n" +
            "125   ６三金打   (0:1/0:9:55)\n" +
            "126   ４四玉(53)   (0:9/0:14:12)\n" +
            "127   ５三銀打   (0:9/0:10:4)\n" +
            "128   投了   (0:1/0:14:13)";

    private static final String TSUME_EXAMPLE = "# ---- 分岐棋譜(BKF)形式棋譜ファイル\n" +
            "# ----   saved by aaa bbb\n" +
            "対局日：1997 年 3 月 12 日\n" +
            "表題：無題\n" +
            "作意：aaa\n" +
            "作者：bbb\n" +
            "発表誌：出所不明\n" +
            "詰手数：7\n" +
            "目安時間：5\n" +
            "手合割：平手　　\n" +
            "後手の持駒：飛二　金四　銀　桂三　香三　歩十四　\n" +
            "  ９ ８ ７ ６ ５ ４ ３ ２ １\n" +
            "+---------------------------+\n" +
            "| ・ ・ ・ ・ ・ 角 ・ ・v香|一\n" +
            "| ・ ・ ・ ・ ・ ・ ・ ・ ・|二\n" +
            "| ・ ・ ・ ・ 銀 ・v玉 ・v銀|三\n" +
            "| ・ ・ ・ ・ ・v歩v歩 ・ ・|四\n" +
            "| ・ ・ ・ ・ ・ ・ ・v歩v歩|五\n" +
            "| ・ ・ ・ ・ ・ ・ ・ ・ ・|六\n" +
            "| ・ ・ ・ ・ ・ ・ ・ ・ ・|七\n" +
            "| ・ ・ ・ ・ ・ ・ ・ ・ ・|八\n" +
            "| ・ ・ ・ ・ ・ ・ ・ ・ ・|九\n" +
            "+---------------------------+\n" +
            "先手の持駒：角　銀　桂　\n" +
            "先手番\n" +
            "先手：\n" +
            "後手：\n" +
            "手数----指手---------消費時間--\n" +
            "*作者：伊藤果\n" +
            "*”宇宙物”です。\n" +
            "   1 ４五桂打     ( 0:00/00:00:00)\n" +
            "   2 同　歩(44)   ( 0:00/00:00:00)+\n" +
            "   3 ４四角打     ( 0:00/00:00:00)\n" +
            "   4 ４三玉(33)   ( 0:00/00:00:00)\n" +
            "   5 ５二銀打     ( 0:00/00:00:00)\n" +
            "   6 ５四玉(43)   ( 0:00/00:00:00)\n" +
            "   7 ３二角成(41) ( 0:00/00:00:00)\n" +
            "\n" +
            "変化：2手\n" +
            "   2 ２四玉(33)   ( 0:00/00:00:00)\n" +
            "*変化手順\n" +
            "   3 ４六角打     ( 0:00/00:00:00)\n" +
            "   4 ３五歩(34)   ( 0:00/00:00:00)\n" +
            "   5 ３三銀打     ( 0:00/00:00:00)\n" +
            "   6 ３四玉(24)   ( 0:00/00:00:00)\n" +
            "   7 ４四銀成(53) ( 0:00/00:00:00)\n";

    private static final String TSUME_EXAMPLE_2 = "出典：将棋精妙\n" +
            "作品番号：１\n" +
            "作者：二代伊藤宗印\n" +
            "発表年月：1858/00\n" +
            "手数：３３\n" +
            "完全性：余詰\n" +
            "後手の持駒：金四　銀二　香三　歩十三　\n" +
            "  ９ ８ ７ ６ ５ ４ ３ ２ １\n" +
            "+---------------------------+\n" +
            "| ・ ・ ・v桂 ・ ・ ・ ・ ・|一\n" +
            "|v玉 角v歩 馬 ・ ・ ・ ・ ・|二\n" +
            "| ・ ・ ・ ・ ・ ・ ・ ・ ・|三\n" +
            "| 桂 ・ ・v歩 ・ ・ ・ ・ ・|四\n" +
            "|vとv桂 ・ ・v歩 ・ ・ ・ ・|五\n" +
            "| ・ ・ 飛 ・v全 ・ ・ ・ ・|六\n" +
            "|v歩 桂 ・ ・ ・ ・ ・ ・ ・|七\n" +
            "| ・ 香 ・ ・ ・ ・ ・ ・ ・|八\n" +
            "| ・v銀 ・ ・ 龍 ・ ・ ・ ・|九\n" +
            "+---------------------------+\n" +
            "先手の持駒：なし\n" +
            "*将棋精妙  第１番\n" +
            "*\n" +
            "*余詰作\n" +
            "*作意不詰\n" +
            "   1 ９一角成(82)\n" +
            "   2 同玉(92)\n" +
            "   3 ８二桂成(94)\n" +
            "   4 同玉(91)\n" +
            "   5 ７二飛(76)\n" +
            "   6 ９三玉(82)\n" +
            "   7 ９四歩打+\n" +
            "*余詰あり\n" +
            "   8 同と(95)\n" +
            "   9 ７一馬(62)\n" +
            "  10 ８四玉(93)\n" +
            "  11 ７五飛成(72)\n" +
            "  12 ８三玉(84)\n" +
            "  13 ９五桂(87)\n" +
            "  14 同と(94)\n" +
            "  15 ８五香(88)\n" +
            "  16 同と(95)\n" +
            "  17 ９五桂打\n" +
            "  18 ９四玉(83)\n" +
            "  19 ６一馬(71)\n" +
            "  20 ９五玉(94)\n" +
            "  21 ６二馬(61)\n" +
            "  22 ７三歩打+\n" +
            "*以下逃れ\n" +
            "\n" +
            "変化：22手\n" +
            "  22 ９六玉(95)\n" +
            "  23 ５六龍(59)\n" +
            "  24 同歩(55)\n" +
            "  25 ９五馬(62)\n" +
            "  26 同と(85)\n" +
            "  27 ７六龍(75)\n" +
            "  28 ８六と(95)\n" +
            "  29 ８五銀打\n" +
            "  30 ９五玉(96)\n" +
            "  31 ８七桂打\n" +
            "  32 同と(86)\n" +
            "  33 ９六龍(76)\n" +
            "*７手目以降の余詰手順に多数の余詰があり、作意不詰としました。\n" +
            "\n" +
            "変化：7手\n" +
            "   7 ７一馬(62)\n" +
            "   8 ９四玉(93)\n" +
            "   9 ７四飛成(72)\n" +
            "  10 ８四金打\n" +
            "  11 ６一馬(71)\n" +
            "  12 ９三玉(94)\n" +
            "  13 ７一馬(61)\n" +
            "  14 ８二歩打\n" +
            "  15 同馬(71)\n" +
            "  16 同玉(93)\n" +
            "  17 ８四龍(74)\n" +
            "  18 ７二玉(82)\n" +
            "  19 ７三金打\n" +
            "  20 ６一玉(72)\n" +
            "  21 ６四龍(84)\n" +
            "  22 ５二玉(61)\n" +
            "  23 ６三龍(64)\n" +
            "  24 ４一玉(52)\n" +
            "  25 ４二歩打\n" +
            "  26 同玉(41)\n" +
            "  27 ５四桂打\n" +
            "  28 ３二玉(42)\n" +
            "  29 ３九龍(59)\n" +
            "  30 ２二玉(32)\n" +
            "  31 ３三龍(39)\n" +
            "  32 １一玉(22)\n" +
            "  33 １二歩打\n" +
            "  34 ２一玉(11)\n" +
            "  35 ２二歩打\n" +
            "  36 １二玉(21)\n" +
            "  37 １三龍(33)\n" +
            "*まで37手詰";

    @Test
    public void readFromShogiClub24Kifu() {
        GameRecord kif24 = KifFormat.INSTANCE.read(KIF_24).get(0);
        assertEquals("USF:1.0\n" +
                "^w:7g7f3c3d2g2f5c5d2f2e8b5b3i4h5a6b8h2B3a2b9g9f9c9d7i7h6b7b5i6h7b8b4g4f7a7b6g6f6c6d2e2d2c2d2h2dp" +
                "*2c2d2h5d5e4h4g5b5aB*1f4a3b1f3d5a5d3d4e5d2dP" +
                "*2e2d4d6h7i2b3c7i8h3c3d4e6g6d6e7h7g2a3c2e2d2c2d2h2d3b2c2d2hp*2d6f6e2c2bFOUL\n" +
                "BN:AAA(1779)\n" +
                "WN:BBB(1795)\n" +
                "GD:Aug 31, 2020 6:39:53 PM\n" +
                "GN:Rating Game Room(short-timelimited)\n", UsfFormat.INSTANCE.write(kif24));
    }

    @Test
    public void readFrom81DojoKifu() {
        GameRecord kif81 = KifFormat.INSTANCE.read(KIF_81).get(0);
        assertEquals("USF:1.0\n" +
                "^w:7g7f3c3d2g2f8c8d2f2e8d8e6i7h2b8H7i8h3a2b8h7g2b3c3i3h4a3b3h2g7a7b2g2f1c1d1g1f9c9d5i6h7c7d1f1e1d1e" +
                "2f1e1a1e1i1eb*1i2h1hs*2g1h1ip*1h1e1B1h1I1b2a1i2iL*5f3c4dN*6e3b4bB*3an*4a3a4B5a4bB*3a4b5bG*4b5b6b4b4a" +
                "r*2h6h7i6b7a5f5C8e8f7g8f8b8f5c6b6a6b3a8Fl*8cR*5a6b6a5a6A7a6a4a5a6a7a5a5b8c8fG*6b7a8b6b7b8b7b8g8fb*8g" +
                "L*5h8g7F8i7gp*8gS*8eg*8h7i6i8h7hRSGN\n" +
                "BN:AAA\n" +
                "WN:BBB\n" +
                "GD:2020/08/10\n" +
                "GQ:81Dojo\n", UsfFormat.INSTANCE.write(kif81));
    }

    @Test
    public void readFromPyo() {
        List<GameRecord> kif = KifFormat.INSTANCE.read(KIF_PYO);
        assertEquals("USF:1.0\n" +
                "^b4k4/1r5b1/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w " +
                "-:8c8d2g2f8d8e2f2e8e8f8g8f8b8f7g7f8f8d6i7h5a6aP*8g6a5b3i3h8d8a3h2gp*8e2g3f8a8d3f3e8d6d2e2d2c2d3e2dp" +
                "*2f2h2f2b3a2d3C8e8f2f2A8f8G7h8g6d6G2a3a6g8g3a4b5b6a4i5hp*2hP*8bg" +
                "*5b4b4a5b5a4a3b6a7a3c4c2h2I8h3C5a4b3b4b2i2hG*7bRSGN\n" +
                "BN:プレイヤー\n" +
                "WN:Lv16 ピヨ郎(R810)\n" +
                "GD:2020/09/27 18:07:32\n" +
                "GN:ぴよ将棋w ハ枚落ち（トンボ）\n", UsfFormat.INSTANCE.write(kif.get(0)));
    }

    @Test
    public void readFromGotePosition() {
        GameRecord kif = KifFormat.INSTANCE.read(KIF_GOTE_POSITION).get(0);
        assertEquals("USF:1.0\n" +
                "^*ln1g3nl/1ks1g2r1/1pppp2pp/p4sp2/7P1/P1PP1SP1P/1PS1P4/1KG4R1/LN3G1NL w BPbp:\n" +
                "BN:AAA\n" +
                "WN:BBB\n", UsfFormat.INSTANCE.write(kif));
    }

    @Test
    public void readFromShogiExtend() {
        GameRecord kif = KifFormat.INSTANCE.read(ANOTHER_KIF).get(0);
        assertEquals("USF:1.0\n" +
                "^w:2g2f3c3d2f2e2b3c3i4h3a3b1g1f4c4d3g3f3b4c4h3g8b3b5i6h5a6b6h7h6b7b7i6h7b8b6i7i7a7b9g9f9c9d3g4f5c5d5g5f4a5b4i5i3c4b7g7f1a1b1f1e4b6d5f5e4d4e4f4e6d5e8h5e5d5e2e2d2c2dB*2c3b2b4e3d4c3b2c3B2b3bS*4c3b3a2h2d5e5f8i7g5b4c3d4C3a3f2d2A3f3IP*5h5f5G6h5g3i5iN*5c6a7a4c5bb*3e2a1bb*3d1b3b5i7i7h7i3d6GG*6hg*8i7i6i3e5G5h5gs*7h6i5ig*4iMATE\n" +
                "BN:AAA 初段\n" +
                "WN:BBB 初段\n" +
                "GD:2020/09/28 22:00:12\n" +
                "GN:将棋ウォーズ(10分切れ負け)\n" +
                ".0\n" +
                ".\n" +
                "#▲備考：居飛車\n" +
                ".\n" +
                ".\n" +
                ".\n" +
                ".\n" +
                ".\n" +
                ".\n" +
                ".\n" +
                ".\n" +
                ".\n" +
                ".\n" +
                ".\n" +
                "#△備考：振り飛車\n" +
                ".\n" +
                ".\n" +
                ".\n" +
                ".\n" +
                ".\n" +
                ".\n" +
                ".\n" +
                "#▲囲い：elmo囲い\n" +
                ".\n" +
                "#△囲い：片美濃囲い\n" +
                ".\n" +
                ".\n" +
                ".\n" +
                ".\n" +
                ".\n" +
                ".\n" +
                "#△囲い：美濃囲い\n" +
                ".\n" +
                "#▲囲い：左山囲い\n", UsfFormat.INSTANCE.write(kif));
    }

    @Test
    public void readPosition() {
        ShogiPosition pos = KifFormat.INSTANCE.readPosition(KIF_GOTE_POSITION);
        assertEquals("ln1g3nl/1ks1g2r1/1pppp2pp/p4sp2/7P1/P1PP1SP1P/1PS1P4/1KG4R1/LN3G1NL w BPbp",
                SfenConverter.toSFEN(pos));
    }

    @Test
    public void readOnlyPosition() {
        ShogiPosition pos = KifFormat.INSTANCE.readPosition(KIF_ONLY_POSITION);
        assertEquals("ln1g3nl/1ks1g2r1/1pppp2pp/p4sp2/7P1/P1PP1SP1P/1PS1P4/1KG4R1/LN3G1NL w BPbp",
                SfenConverter.toSFEN(pos));
    }

    @Test
    public void readOnlyPositionDokoro() {
        ShogiPosition pos = KifFormat.INSTANCE.readPosition(KIF_ONLY_POSITION_DOKORO);
        assertEquals("lnsgkgsnl/1r5+B1/pppppp1pp/6p2/9/2P6/PP1PPPPPP/7R1/LNSGKGSNL w B", SfenConverter.toSFEN(pos));
    }


    @Test
    public void readShogiGui() {
        GameRecord kif = KifFormat.INSTANCE.read(SHOGI_GUI_TSUME).get(0);
        assertEquals("USF:1.0\n" +
                        "^*6p1k/9/7b1/6N2/9/9/9/9/9 b 2RNb4g4s2n4l17p:R*1cb*1b1c1B1a1bR*1a1b1aB*3c1a2a3d2B\n" +
                        ".0\n" +
                        "#*Engines 0 YaneuraOu 2018 T.N.K. (dolphin) NNUE 4.82 64AVX2 TOURNAMENT\n",
                UsfFormat.INSTANCE.write(kif));
    }

    @Test
    public void readIsShogi() {
        GameRecord kif = KifFormat.INSTANCE.read(IS_SHOGI_TSUME).get(0);
        assertEquals("USF:1.0\n" +
                "^*8+B/3+b3+R1/3S1k3/3p2r2/5Pp2/9/9/9/9 b 4gs4n3l14p:4e4d4c4d2b4b\n" +
                ".0\n" +
                "#第２問\n" +
                ".\n" +
                ".\n" +
                ".\n" +
                "#正解図\n", UsfFormat.INSTANCE.write(kif));
    }

    @Test
    public void readHandicap() {
        GameRecord kif = KifFormat.INSTANCE.read(HANDICAP_81).get(0);
        assertEquals("USF:1.0\n" +
                "^wlnsgkgsnl/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w " +
                "-:7a6b7g7f5c5d4g4f6b5c4f4e4a3b5g5f5a5b3g3f6c6d3f3e3a2b3i4h6a6b4h4g6b6c7i6h6c7d6i7h6d6e6h5g7d8e2h6h" +
                "8e7f5i4h8c8d6g6f6e6f5g6f8d8e6f6ep*6g6h6i7f7eP*6f2b3a6i6gp*6dP*7f7e7d6e7d7c7d6f6es*6c4g4f8a7c6e6d5c" +
                "6dG*8c3a4b5f5ep*6f8h6f4b5c6f8d7c6eP*6f6d5e4f5e5d5e6f6es*5f6g6i4c4dP*5g5f4e8d7C6c5d6e6dp*6eS*6c5b4c" +
                "6c5D5c5d6d6C5e5fS*5b4c4b7c5a4b3a6c5c5f5G4h5g5d5e6i6e5e5f5g6f5f6e6f6er*6iP*6f6i4I6e6d4i5hP*5d5h5f6d" +
                "7c5f6f7c7b3a2b5c4b3b4b5a4bs*3a4b4a4e5dG*3b3a3bS*3a2b1b4a3bg*6a5b6A6f6c7b8a6c8cS*8b8c9b8a7bg*8a7b6b" +
                "9b8b6b5cg*6c5c4ds*5cRSGN\n" +
                "BN:aaa\n" +
                "WN:bbb\n" +
                "GD:2021/06/26\n" +
                "GQ:81Dojo\n", UsfFormat.INSTANCE.write(kif));
    }

    @Test
    public void readHandicap1() {
        GameRecord kif = KifFormat.INSTANCE.read(HANDICAP_1).get(0);
        assertEquals("USF:1.0\n" +
                "^wlnsgkgsnl/9/ppppppppp/9/9/9/PPPPPPPPP/1B5R1/LNSGKGSNL w " +
                "-:7a6b7g7f5c5d4g4f6b5c4f4e4a3b5g5f5a5b3g3f6c6d3f3e3a2b3i4h6a6b4h4g6b6c7i6h6c7d6i7h6d6e6h5g7d8e2h6h" +
                "8e7f5i4h8c8d6g6f6e6f5g6f8d8e6f6ep*6g6h6i7f7eP*6f2b3a6i6gp*6dP*7f7e7d6e7d7c7d6f6es*6c4g4f8a7c6e6d5c" +
                "6dG*8c3a4b5f5ep*6f8h6f4b5c6f8d7c6eP*6f6d5e4f5e5d5e6f6es*5f6g6i4c4dP*5g5f4e8d7C6c5d6e6dp*6eS*6c5b4c" +
                "6c5D5c5d6d6C5e5fS*5b4c4b7c5a4b3a6c5c5f5G4h5g5d5e6i6e5e5f5g6f5f6e6f6er*6iP*6f6i4I6e6d4i5hP*5d5h5f6d" +
                "7c5f6f7c7b3a2b5c4b3b4b5a4bs*3a4b4a4e5dG*3b3a3bS*3a2b1b4a3bg*6a5b6A6f6c7b8a6c8cS*8b8c9b8a7bg*8a7b6b" +
                "9b8b6b5cg*6c5c4ds*5cRSGN\n" +
                "BN:aaa\n" +
                "WN:bbb\n" +
                "GD:2021/06/26\n" +
                "GQ:81Dojo\n", UsfFormat.INSTANCE.write(kif));
    }

    @Test
    public void readExampleTsume() {
        GameRecord kif = KifFormat.INSTANCE.read(TSUME_EXAMPLE).get(0);
        assertEquals("USF:1.0\n" +
                "^*5B2l/9/4S1k1s/5pp2/7pp/9/9/9/9 b BSN2r4gs3n3l14p:N*4e4d4eB*4d3c4cS*5b4c5d4a3B\n" +
                "GD:1997 年 3 月 12 日\n" +
                ".0\n" +
                "#作者：伊藤果\n" +
                "#”宇宙物”です。\n" +
                ".\n" +
                ".\n" +
                ".\n" +
                ".\n" +
                ".\n" +
                ".\n" +
                ".\n" +
                ".1\n" +
                ".3c2d\n" +
                "#変化手順\n" +
                ".B*4f\n" +
                ".3d3e\n" +
                ".S*3c\n" +
                ".2d3d\n" +
                ".5c4D\n", UsfFormat.INSTANCE.write(kif));
    }

    @Test
    public void readExampleTsume2() {
        GameRecord kif = KifFormat.INSTANCE.read(TSUME_EXAMPLE_2).get(0);
        assertEquals("USF:1.0\n" +
                        "^*3n5/kBp+B5/9/N2p5/+pn2p4/2R1+s4/pN7/1L7/1s2+R4 b " +
                        "4g2s3l13p:8b9A9b9a9d8B9a8b7f7b8b9cP*9d9e9d6b7a9c8d7b7E8d8c8g9e9d9e8h8e9e8eN" +
                        "*9e8c9d7a6a9d9e6a6bp*7c\n" +
                        ".0\n" +
                        "#将棋精妙  第１番\n" +
                        "#\n" +
                        "#余詰作\n" +
                        "#作意不詰\n" +
                        ".\n" +
                        ".\n" +
                        ".\n" +
                        ".\n" +
                        ".\n" +
                        ".\n" +
                        ".\n" +
                        "#余詰あり\n" +
                        ".\n" +
                        ".\n" +
                        ".\n" +
                        ".\n" +
                        ".\n" +
                        ".\n" +
                        ".\n" +
                        ".\n" +
                        ".\n" +
                        ".\n" +
                        ".\n" +
                        ".\n" +
                        ".\n" +
                        ".\n" +
                        ".\n" +
                        "#以下逃れ\n" +
                        ".21\n" +
                        ".9e9f\n" +
                        ".5i5f\n" +
                        ".5e5f\n" +
                        ".6b9e\n" +
                        ".8e9e\n" +
                        ".7e7f\n" +
                        ".9e8f\n" +
                        ".S*8e\n" +
                        ".9f9e\n" +
                        ".N*8g\n" +
                        ".8f8g\n" +
                        ".7f9f\n" +
                        "#７手目以降の余詰手順に多数の余詰があり、作意不詰としました。\n" +
                        ".6\n" +
                        ".6b7a\n" +
                        ".9c9d\n" +
                        ".7b7D\n" +
                        ".g*8d\n" +
                        ".7a6a\n" +
                        ".9d9c\n" +
                        ".6a7a\n" +
                        ".p*8b\n" +
                        ".7a8b\n" +
                        ".9c8b\n" +
                        ".7d8d\n" +
                        ".8b7b\n" +
                        ".G*7c\n" +
                        ".7b6a\n" +
                        ".8d6d\n" +
                        ".6a5b\n" +
                        ".6d6c\n" +
                        ".5b4a\n" +
                        ".P*4b\n" +
                        ".4a4b\n" +
                        ".N*5d\n" +
                        ".4b3b\n" +
                        ".5i3i\n" +
                        ".3b2b\n" +
                        ".3i3c\n" +
                        ".2b1a\n" +
                        ".P*1b\n" +
                        ".1a2a\n" +
                        ".P*2b\n" +
                        ".2a1b\n" +
                        ".3c1c\n" +
                        "#まで37手詰\n",
                UsfFormat.INSTANCE.write(kif));
    }
}